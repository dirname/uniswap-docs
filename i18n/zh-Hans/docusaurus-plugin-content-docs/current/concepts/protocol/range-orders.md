---
id: range-orders
title: 范围订单
sidebar_position: 4
---

自定义流动性头寸，加上单边资产供应，为自动做市商（AMM）交易带来了一种新风格：范围订单。

在典型的订单簿市场中，任何人都可以轻松设置限价单：以特定预设价格买入或卖出资产，允许订单在未来不确定的时间被填满。

通过 Uniswap V3，您可以通过在特定范围内提供单一资产作为流动性来近似实现限价单。与传统的限价单类似，范围订单可以设定预期在未来某个时间点执行，目标资产在现货价格跨越整个订单范围后可供提取。

与某些可能产生费用的限价单市场不同，范围订单创建者在订单被填满时会生成费用。这是由于范围订单本质上是一种流动性供应形式，而非典型的交易。

## 范围订单的可能性

AMM设计的性质使得某些类型的限价单成为可能，而其他类型则无法复制。以下是四个范围订单及其传统对应物的例子；前两个是可行的，后两个则不行。

> 一个重要的区别：与传统的限价单不同，如果现货价格越过给定范围然后反向移动，在目标资产提取前再次反方向穿过，范围订单将**未被填满**。虽然在此期间你将赚取LP费用，但如果目标是在理想的资产中完全退出，你需要留意订单，并在订单已填满时手动移除你的流动性，或者使用第三方仓位管理服务代表你提取。

### 止盈订单

> DAI / ETH 池的当前价格为 1,500 DAI / ETH。你想在 ETH 的价格达到 1,600 DAI / ETH 时，将你的 ETH 卖出换成 DAI。这是可能的，因为高于现货价格的价格空间是以更高价值的资产，即 ETH 表示的。你可以在 1,600 DAI / ETH 的价格提供 ETH，并在现货价格穿越你的仓位时填满订单。

<img src={require('./images/RangeOrder1.png').default} alt="RangeOrder1" width="45%" height="45%" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img src={require('./images/RangeOrder2.png').default} alt="RangeOrder1" width="45%" height="45%" />

---

### 买入限价订单

> DAI / ETH 池的当前价格为 1,500 DAI / ETH。你预计在下一次市场低迷时，ETH 在降至 1,000 后会反弹，所以你想以 1,000 DAI / ETH 的价格放置一个范围订单，从 DAI 换到 ETH。这是可能的，因为低于现货价格的价格空间是以较低价格的资产，即 DAI 表示的。你可以在 1,000 DAI / ETH 的价格提供 DAI，当 ETH 的现货价格降至 1,000 DAI / ETH 以下时，它将被换成 ETH。

如上例所示，在 Uniswap V3 中，给定池中的两个配对资产在现货价格上下被分离，较高价格的资产在现货价格之上，较低价格的资产在现货价格之下。

下面的例子展示了由于资产在价格空间上的分离，无法复制的限价单样式。

---

### 买入止损订单

> DAI / ETH 池的当前价格为 1,500 DAI / ETH。你预计一旦 ETH 达到 2,000 DAI/ ETH，其价格将飙升至 3,000，因此你想以 2,000 DAI/ETH 的价格放置一个范围订单，从 DAI 换到 ETH。这是不可能的，因为高于 1,500 DAI / ETH 的价格空间是以 ETH 表示的 — 因此，你不能在你期望的价格上提供必要的 DAI 来换成 ETH。

---

### 止损订单

> DAI / ETH 池的当前价格为 1,500 DAI / ETH。你预计一旦 ETH 的价格降至 1,000 以下，它将跌至 200。因此，你想以 1,000 的价格放置一个范围订单，从 ETH 换到 DAI。这是不可能的，因为低于现货价格的价格空间是以 DAI 表示的，因此你不能在 1,000 的价格上分配必要的 ETH 来换成 DAI。

---

## 费用

由于你的流动性头寸产生的费用将以给定配对的两种代币表示。在上面的任何例子中，在 ETH 换成 DAI 或 DAI 换成 ETH 之后，你的账户都将因流动性供应奖励而获得少量的 ETH 和 DAI。

在设置范围订单时，集中度的方法取决于用户。选择更宽的范围可能会产生更多费用，如果在你的范围内有价格波动的话，代价是增加订单未被填满的风险，如果现货价格在完成你整个范围之前反转。