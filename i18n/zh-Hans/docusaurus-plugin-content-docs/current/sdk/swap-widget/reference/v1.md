---
id: v1
title: API V1 参考（已弃用）
sidebar_position: 2
---

# Swap 小部件 API V1 参考（已弃用）

<div className="widget-api">

## 必需参数 {#required-parameters}

| 属性名称         | 属性类型 | 默认值   | 描述                                                                                                                                                                                                                                                                                                                                                                                        |
| ----------------- | --------- | ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `jsonRpcEndpoint` | `string`  | `undefined`   | 您的 JSON-RPC 端点的 URI。强烈建议提供，以便在用户连接钱包前给出交易报价。如果没有提供，小部件将完全禁用直到用户连接一个钱包。一旦钱包连接，小部件将使用钱包的 JSON-RPC。请参阅 [理解 Swap 小部件状态](/sdk/swap-widget/guides/getting-started#understanding-widget-states)。 |
| `provider`        | `any`     | `undefined`   | 一个 [EIP-1193](https://eips.ethereum.org/EIPS/eip-1193) 提供者。这是进行交换所必需的。                                                                                                                                                                                                                                                                                                         |

## 可选参数 {#optional-parameters}

| 属性名称                   | 属性类型                     | 默认值           | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------- | ----------------------------- | ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `convenienceFee`            | `number`                      | `undefined`             | 可选地，您可以在通过您的网页应用执行的交换上收取便利费。允许的范围是 1 到 100 个基点（包括 100），与 Uniswap v3 边缘合约一致。                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `convenienceFeeRecipient`   | `{[chainId: number]: string}` | `undefined`             | 在每个网络上接收便利费的地址。如果提供了 `convenienceFee`，则必须提供该参数。                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `defaultInputTokenAddress`  | `{[chainId: number]: string}` | `string` 或 `'NATIVE'`  | 对于每个网络链 ID，在输入字段中默认选择的代币地址（例如 USDC）。如果留空，小部件将使用连接链的原生代币作为默认值。这可以通过特殊字符串 `'NATIVE'` 明确定义。为了方便起见，您可以传递单个字符串而不是 `chainId` 映射。在这种情况下，小部件将假定该字符串对应的是 `chaindId=1` 的 L1 以太坊地址。在此参数中提供的任何地址都必须包含在 `tokenList` 中。 |
| `defaultInputAmount`        | `number`                      | `0`                     | 输入字段的默认金额（例如 1 ETH）。此值将遵循 `defaultInputTokenAddress` 的小数位数。此参数仅在也设置了 `defaultInputTokenAddress` 时有效。此参数与 `defaultOutputAmount` 相互排斥，因此您只能设置 `defaultInputAmount` 和 `defaultOutputAmount` 中的一个。                                                                                                                                                                                         |
| `defaultOutputTokenAddress` | `{[chainId: number]: string}` | `string` 或 `undefined` | 对于每个网络链 ID，在输入字段中默认选择的代币地址（例如 USDC）。如果留空，则没有默认值。此参数中提供的任何地址都必须包含在 `tokenList` 中。                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `defaultOutputAmount`       | `number`                      | `0`                     | 输入字段的默认金额（例如 100 USDC）。此值将遵循 `defaultOutputTokenAddress` 的小数位数。此参数与 `defaultInputAmount` 相互排斥，因此您只能设置 `defaultInputAmount` 和 `defaultOutputAmount` 中的一个。                                                                                                                                                                                                                                                                                                                              |
| `locale`                    | `SupportedLocale`             | `en-US`                 | 为小部件界面指定一个明确的语言环境。这可以设置为库中在 [`SUPPORTED_LOCALES`](https://github.com/Uniswap/widgets/blob/main/src/constants/locales.ts) 导出的值之一。                                                                                                                                                                                                                                                                                                          |
| `onConnectWallet`           | `() => void`                  | `undefined`             | 如果传递，"连接您的钱包" 消息将是可点击的，并且点击它会触发此处理函数。这可用于从小部件触发您自己的钱包连接流程。                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `onError`                   | `ErrorHandler`                | `undefined`             | 一个错误处理器，接收在小部件中发生的任何错误。这可用于收集错误指标。                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `theme`                     | `Theme`                       | `lightTheme`            | 指定自定义主题（颜色、字体和边框半径）。请参阅 [自定义主题](/sdk/swap-widget/guides/getting-started#customizing-theme)。                                                                                                                                                                                                                                                                                                                                                                                                  |
| `tokenList`                 | `string`                      | `TokenInfo[]`           | 指定默认出现在代币选择器列表中的代币集。接受由代币列表标准定义的代币列表的 URI，或内联的代币数组。如果没有提供，将使用 Uniswap Labs 默认的代币列表。请参阅 [自定义默认代币列表](/sdk/swap-widget/guides/getting-started#customizing-default-token-list)。                                                                                                                                                                                                                                 |
| `width`                     | `number` 或 `string`          | `360`                   | 指定小部件的宽度。如果指定为数字，这是以像素为单位；否则，它被解释为 CSS `<length>` 数据类型。推荐宽度为 360px。最小宽度为 270px。请参阅 [自定义宽度](/sdk/swap-widget/guides/getting-started#customizing-width)。                                                                                                                                                                                                                                                                                                                             |

## 订阅事件

在 Swap 小部件的生命周期中，您需要的大多数事件都可在 web3 提供者上获取。例如，下面的代码片段展示了如何监听当钱包账户更改或新钱包连接时的事件。您可以在 [MetaMask](https://docs.metamask.io/guide/ethereum-provider.html) 文档中看到更多事件示例。

```js
// 订阅消息
interface ProviderMessage {
  type: string;
  data: unknown;
}

ethereum.on(
  'message',
  handler: (message: ProviderMessage) => void
);
```

</div>

:::note 有疑问？
加入 [Discord 频道](https://discord.com/channels/597638925346930701/941447445844463676)，向 Uniswap 社区提问并获得支持。
:::