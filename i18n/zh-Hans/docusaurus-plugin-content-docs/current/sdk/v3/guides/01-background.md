---
id: background
title: 背景知识
position: 1
---

在与 Uniswap 集成之前，对于新手来说，回顾以下关于一些重要的开发者 web3 概念、我们示例的结构以及 SDK 概念的背景信息可能会有所帮助。

:::info
如果您已经熟悉 web3 开发和/或我们的 SDK 基础，并且想直接进入代码，请从我们的第一个指南，[获取报价](./swaps/01-quoting.md)开始！
:::

## 提供者

与区块链通信通常通过提供者和智能合约及其 [ABI](./01-background.md#abis) 的本地模型来完成。

为了实现这一点，我们的示例使用了 [ethers.js](https://docs.ethers.io/v5/) 库。要实例化一个提供者，您需要一个数据源。我们的示例提供了两种选择：

- **JSON RPC URL**：如果您直接与以太坊主网或本地分叉工作，像 [Infura](https://infura.io/) 这样的产品为各种链和测试网提供 JSON RPC URL。对于我们的示例，我们只会在以太坊主网上使用。

- **钱包扩展**：如果您正在连接到钱包浏览器扩展，这些钱包将一个来源直接嵌入到 Javascript 窗口对象中作为 `window.ethereum`。此对象提供了有关用户钱包的信息，并能够与连接的链进行通信。对于我们的示例而言，重要的是它可以与 `ethers.js` 结合使用来构建一个提供者。

## Uniswap 的可运行示例

每个指南都伴随着使用 React 提供基本 UI 以与示例交互的 [可运行示例](https://github.com/Uniswap/examples/tree/main/v3-sdk)。每个示例提供了相关选项，例如针对本地区块链运行或直接连接到以太坊主网。您还可以选择使用钱包扩展，它可用于任何环境。

输入和环境设置在每个示例的 `config.ts` 中配置，允许进行简单的设置和配置。

### 开发和测试

为了测试您的代码，我们建议利用以太坊主网的本地分叉。为了帮助轻松测试，每个示例都包括了一个快速入门，用于运行带有测试钱包的本地链。为了进一步测试，我们还建议使用钱包扩展并连接到本地链。最后，如果需要，每个示例都可以针对以太坊主网运行。每个代码示例的完整开发指令可以在其 `README.md` 中找到。

### 实用库

每个示例都集中在示例 `libs/` 文件夹中的单个文件内，入口点在每个指南和 README 中都有标注。

为了让指南专注于 SDK 的核心功能，额外的基本构建块可以在每个示例的 `libs` 文件夹中找到。从这些文件导出的功能旨在为每个示例提供所需的最小值，而不是用于生产使用的完整库。这些还包括存储核心常量，如对代币、ABI 和区块链地址的定义，这些可能分散核心概念的注意力。以下是您会遇到的帮助库的摘要。

#### 提供者实用工具

`provider.ts` 封装了 `ethers.js` 的基础和连接到钱包扩展，将其抽象为提供者、钱包地址以及发送交易的能力的视图。它还帮助抽象了您希望在示例中运行的配置环境，而无需在配置之外进行代码更改。

#### 钱包实用工具

`wallet.ts` 提供了查询钱包（无论是通过扩展连接还是在代码/配置中定义）的余额和其他必要信息的能力。

#### 池信息

`pool.ts` 包含在不必要/核心于相关指南时查询池信息的基础工作

#### 显示实用工具

`conversion.ts` 提供显示和轻量级数学包装，以帮助在处理货币金额（通常以原始数字和小数位分开存储，以便于精度原因）时向用户展示可读价格的形式，表现为两个函数：`fromReadableAmount` 和 `toReadableAmount`

## 值得注意的 SDK 结构和概念

在使用 SDK 时，理解某些设计选择及其必要性可能是有帮助的。下面您可以找到一些重要的概念。

### ABI

为了使其他人能够与智能合约互动，每个合约都会公开一个 ABI（应用程序二进制接口）。由于这些是在区块链上定义的，我们必须确保向我们的 JavaScript 函数提供正确的定义。ABI 由各种 SDK 提供，并根据需要导入。有些示例会直接定义所需的 ABI。

### CurrencyAmount 和 JSBI

加密货币应用经常处理非常小的代币分数。因此，高精度非常重要。为了确保保持精度，`CurrencyAmount` 类帮助以分数形式存储确切值，并利用 [JSBI](https://github.com/GoogleChromeLabs/jsbi) 实现跨 Web 的兼容性。为了向用户漂亮地显示这些金额，有时需要额外的工作。

### 货币

`Currency` 类可以表示原生货币（ETH）和 ERC20 `Token`。货币在其相对价值上各不相同，因此 `Token` 类允许您的应用定义每种货币所需的小数位数，以及货币的地址、符号和名称。