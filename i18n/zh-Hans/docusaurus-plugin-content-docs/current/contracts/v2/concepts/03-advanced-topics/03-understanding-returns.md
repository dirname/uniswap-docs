---
id: understanding-returns
title: 了解收益
---

Uniswap 通过奖励流动性提供者在其他用户与这些资金池交易时产生的手续费，激励用户向交易资金池添加流动性。一般来说，做市活动是一项复杂的活动。与单纯持有资产相比，在基础资产价格大幅且持续波动的情况下，存在亏损的风险。

# 风险

要理解提供流动性相关的风险，你可以阅读 [https://medium.com/@pintail/uniswap-a-good-deal-for-liquidity-providers-104c0b6816f2](https://medium.com/@pintail/uniswap-a-good-deal-for-liquidity-providers-104c0b6816f2)，深入了解如何概念化一个流动性头寸。

# 文章中的示例

<blockquote>

假设一个流动性提供者向资金池中添加了 10,000 DAI 和 100 WETH（总价值为 $20,000），那么资金池现在总共包含 100,000 DAI 和 1,000 ETH。因为提供的金额等于总流动性的10%，合约会铸造并发送给做市商“流动性代币”，使他们有权获得资金池中10%的流动性。这些并不是投机性代币，用于交易。它们仅仅是会计或记账工具，用来跟踪流动性提供者应得的份额。如果其他人随后增减资金，将铸造或销毁新的流动性代币，以确保每个人在资金池中的相对百分比份额保持不变。

**现在假设Coinbase上的价格从 $100 变动到 $150。经过一些套利后，Uniswap 合约也应该反映这一变化。交易者将增加DAI并移除ETH，直到新的比例变为150:1。**

流动性提供者会怎么样？合约反映的情况更接近于122,400 DAI和817 ETH（要验证这些数字是否准确，122,400 * 817 = 100,000,000（我们的常数乘积），并且 122,400 / 817 = 150，这是我们新的价格）。提取我们有权获得的10%将现在产生12,240 DAI和81.7 ETH。这里的总市值是$24,500。大约错过了$500的利润，这是市场做市的结果。

**显然没有人出于慈善目的提供流动性，而收入并不取决于能够从好交易中快速获利的能力（这里没有所谓的“翻转”）。相反，所有交易量的0.3%按比例分配给所有流动性提供者。默认情况下，这些费用被重新投入流动性池中，但随时可以提取。在不知道中间交易数量的情况下，很难知道费用收入与方向性变动损失之间的权衡。交易越频繁、来回越多，越好。**

## 为什么我的流动性价值低于我投入的？

要理解为什么流动性提供者的股份价值可能会下降，尽管有来自费用的收入，我们需要更仔细地看看Uniswap用来管理交易的公式。这个公式真的非常简单。如果我们忽略交易费用，我们有以下等式：

- `eth_liquidity_pool * token_liquidity_pool = constant_product`

换句话说，交易者用他们的ETH换取代币的数量以及反之亦然，是这样计算的：交易后，两个流动性池的乘积与交易前相同。这个公式的后果是，对于与资金池规模相比非常小的交易价值，我们有：

- `eth_price = token_liquidity_pool / eth_liquidity_pool`

结合这两个方程，我们可以算出在任何给定价格下每个流动性池的大小，假设总流动性不变：

- `eth_liquidity_pool = sqrt(constant_product / eth_price)`
- `token_liquidity_pool = sqrt(constant_product * eth_price)`

所以让我们看看价格变动对流动性提供者的影响。为了简化问题，假设我们的流动性提供者向Uniswap DAI交易所提供了1 ETH和100 DAI，这使他们拥有包含100 ETH和10,000 DAI的资金池的1%。这意味着1 ETH = 100 DAI的价格。仍然忽略费用，假设经过一些交易后，价格发生了变化；1 ETH现在值120 DAI。流动性提供者的股份新价值是多少？将数字代入上述公式，我们得到：

- `eth_liquidity_pool = 91.2871`
- `dai_liquidity_pool = 10954.4511`

“由于我们的流动性提供者持有1%的流动性代币，这意味着他们现在可以从流动性池中申领0.9129 ETH和109.54 DAI。但是由于DAI大约等同于美元，我们可能更倾向于将整个金额转换为DAI，以理解价格变动的整体影响。在当前价格下，我们的流动性总价值为219.09 DAI。如果流动性提供者只是保留了他们最初的1 ETH和100 DAI，会怎样呢？好吧，现在我们可以很容易地看到，在新价格下，总价值将是220 DAI。因此，通过向Uniswap提供流动性而不是仅仅持有初始的ETH和DAI，流动性提供者损失了0.91 DAI。”

“当然，如果价格回到流动性提供者添加流动性时的相同值，这种损失就会消失。**因此，我们可以称其为**无常损失**。**使用上面的方程式，我们可以推导出一个公式，以供液性提供时和现在的价格比率来表示无常损失的大小。我们得到以下结果：”

- "`impermanent_loss = 2 * sqrt(price_ratio) / (1+price_ratio) — 1`"

- “我们可以将其绘制出来，以大致了解不同价格比率下的无常损失规模：”
  ![](https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fdnazarov%2FOscQ_nmzbA.png?alt=media&token=4dff866e-a740-4121-9da4-9c9105baa404)

- “或者换句话说：”

  - “1.25倍的价格变动相对于HODL造成0.6%的损失”
  - “1.50倍的价格变动相对于HODL造成2.0%的损失”
  - “1.75倍的价格变动相对于HODL造成3.8%的损失”
  - “2倍的价格变动相对于HODL造成5.7%的损失”
  - “3倍的价格变动相对于HODL造成13.4%的损失”
  - “4倍的价格变动相对于HODL造成20.0%的损失”
  - “5倍的价格变动相对于HODL造成25.5%的损失”

- “注：无论价格变动的方向如何，损失都是一样的（即价格翻倍与价格减半导致相同的损失）。” -->

</blockquote>