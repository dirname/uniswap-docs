---
id: security
title: 安全性
---

# 审计与形式验证

从1月8日到4月30日，一个由六名工程师组成的团队审查并正式验证了Uniswap V2智能合约的关键组件。

他们过去的工作包括在多抵押DAI上的智能合约开发和形式验证。

工作范围包括：

- 核心智能合约的形式验证
- 核心智能合约的代码审查
- 数值误差分析
- 周边智能合约的代码审查（在持续开发中）

报告中还有一个“设计评论”部分，我们强烈推荐深入技术理解Uniswap V2中的一些选择。

> [阅读报告](https://uniswap.org/audit.html)

# 虫赏计划

Uniswap有一个开放且持续的虫赏[计划](https://uniswap.org/bug-bounty/)。

# 在Uniswap上构建时的注意事项

在将Uniswap V2集成到另一个链上系统时，必须特别注意避免安全漏洞、操纵途径以及潜在的资金损失。

作为初步说明：智能合约集成可以在两个层面进行：直接与[Pair](../../reference/smart-contracts/pair)合约交互，或者通过[Router](../../reference/smart-contracts/router-02)。直接交互提供了最大的灵活性，但需要做最多的工作以确保正确。中介交互提供了更有限的功能，但有更强的安全保障。

与Uniswap V2相关的风险主要分为两类。第一类涉及所谓的“静态”错误。这可能包括在交易中向一对发送过多代币（或要求过少代币返回）或允许交易在内存池中停留足够长的时间，使得发件人对价格的预期不再准确。

这些错误可以通过相对简单的逻辑检查来解决。执行这些逻辑检查是路由器的主要目的。那些直接与配对交互的人必须自己执行这些检查（借助[Library](../../reference/smart-contracts/library)的帮助）。

第二类风险是“动态”的，涉及到运行时定价。由于以太坊交易发生在对抗性环境中，编写不当的智能合约可以并且将会被用于牟利。例如，如果一个智能合约在运行时检查Uniswap池中的资产比率，并假设该比率代表这些资产的“公平”或“市场”价格，那么它就极易受到操纵。恶意行为者可以简单地在天真的交易前后插入交易（所谓的“三明治”攻击），导致智能合约以极差的价格交易，以交易者的损失为代价获利，然后以低成本将合约恢复到原始状态。（一个重要的例外是，这类攻击在高流动性池或低价值交易中会得到缓解。）

防范这些攻击的最佳方式是引入价格预言机。预言机是可以返回所需信息的任何设备，在这种情况下，是一对的现货价格。最好的“预言机”只是交易者对主导价格的链下观察，可以作为安全性检查传递给交易。这种策略最适合零售交易平台，用户在此自行发起交易。然而，往往在没有可信赖的价格观察的情况下（例如，在涉及Uniswap的多步骤、程序化交互中）。没有价格预言机，这些交互将被迫以Uniswap上（可能被操纵的）汇率交易。关于Uniswap V2的预言机方法的详细信息，请参阅[Oracles](../core-concepts/oracles)。